<div class="page-container">
    <form action="/carpools" method="POST" class="form-container">
        <div class="page-header">
            <h2>Create a New Carpool Offer</h2>
        </div>
        <div class="form-group">
            <label for="carName">Car Name / Model</label>
            <input type="text" id="carName" name="carName" placeholder="e.g., Maruti Swift" required>
        </div>
        <div class="form-group">
            <label for="location">Route / Location</label>
            <input type="text" id="location" name="location" placeholder="e.g., Campus to City Center" required>
        </div>
        <div class="form-group">
            <label for="time">Departure Date & Time</label>
            <input type="datetime-local" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="price">Price (per person, one way)</label>
            <input type="number" id="price" name="price" placeholder="â‚¹" required>
        </div>
        <div class="form-group">
            <label for="totalSeats">Total Seats Available</label>
            <input type="number" id="totalSeats" name="totalSeats" placeholder="e.g., 3" required>
        </div>
        <div class="form-group">
             <label for="gender">Gender Preference for Riders</label>
             <select id="gender" name="gender" required>
                <option value="any">Any</option>
                <option value="male">Male Only</option>
                <option value="female">Female Only</option>
             </select>
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;">Upload Offer</button>
    </form>
</div>

<script>
    // Set minimum datetime to now (prevent past dates/times)
    const timeInput = document.getElementById('time');
    const now = new Date();
    now.setMinutes(now.getMinutes() - now.getTimezoneOffset()); // adjust for timezone
    timeInput.min = now.toISOString().slice(0, 16);
    
    // Revalidate on form submit
    timeInput.closest('form').addEventListener('submit', function(e) {
        const selected = new Date(timeInput.value);
        const current = new Date();
        if (selected <= current) {
            e.preventDefault();
            alert('Please select a future date and time for the ride.');
            timeInput.focus();
        }
    });
</script>